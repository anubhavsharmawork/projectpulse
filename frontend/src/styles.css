/* Angular Material theme placeholder */

/* Design tokens for spacing, radius, shadows */
:root{
  --space-2: .25rem; --space-3: .5rem; --space-4: .75rem; --space-5: 1rem; --space-6: 1.5rem; --space-8: 2rem;
  --radius-4: 4px; --radius-6: 6px; --radius-8: 8px;
  --shadow-1: 0 1px 2px rgba(0,0,0,.06);
  --shadow-2: 0 6px 20px rgba(0,0,0,.08);
  --brand: #1976d2; /* primary */
  --brand-600:#1565c0; --brand-700:#0d47a1;
  --ink:#0f172a; --muted:#607d8b; --surface:#ffffff; --bg:#f6f8fb;
  --accent:#00bcd4; --good:#4caf50; --warning:#ff9800; --danger:#e53935;
  /* WCAG 2.1 focus indicator colors - ensuring 3:1 contrast ratio */
  --focus-ring: rgba(25, 118, 210, 0.7);
  --focus-ring-offset: 3px;
  --focus-ring-width: 3px;
}

/* ===== WCAG 2.1 Level AA Accessibility Enhancements ===== */

/* Skip to main content link - visible on focus (WCAG 2.4.1) */
.skip-link {
  position: absolute;
  top: -100px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--brand);
  color: #fff;
  padding: 0.75rem 1.5rem;
  border-radius: var(--radius-8);
  z-index: 9999;
  text-decoration: none;
  font-weight: 500;
  box-shadow: var(--shadow-2);
  transition: top 0.2s ease;
}

.skip-link:focus {
  top: 1rem;
  outline: var(--focus-ring-width) solid var(--focus-ring);
  outline-offset: var(--focus-ring-offset);
}

/* Enhanced focus indicators (WCAG 2.4.7) */
:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring);
  outline-offset: var(--focus-ring-offset);
  border-radius: var(--radius-6);
}

/* High contrast focus for interactive elements */
button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
[role="button"]:focus-visible,
[role="link"]:focus-visible,
[tabindex="0"]:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring);
  outline-offset: var(--focus-ring-offset);
  box-shadow: 0 0 0 1px var(--surface), 0 0 0 4px var(--focus-ring);
}

/* Remove default outline and use custom focus ring */
button:focus:not(:focus-visible),
a:focus:not(:focus-visible),
input:focus:not(:focus-visible) {
  outline: none;
}

/* Ensure disabled elements are clearly indicated (WCAG 1.4.1) */
button:disabled,
input:disabled,
select:disabled,
textarea:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* High contrast mode support (WCAG 1.4.11) */
@media (prefers-contrast: high) {
  :root {
    --focus-ring: #000;
    --focus-ring-width: 4px;
    --brand: #0d47a1;
    --ink: #000;
    --muted: #333;
  }

  button, input, select, textarea {
    border-width: 2px;
  }

  a {
    text-decoration: underline;
  }
}

/* Reduced motion support (WCAG 2.3.3) */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .scroll-progress {
    transition: none;
  }

  html {
    scroll-behavior: auto;
  }
}

/* ===== End Accessibility Enhancements ===== */

/* Global theming and layout */
html, body { height: 100%; }
html{ scroll-behavior: smooth; }
body { margin: 0; font-family: Roboto, "Helvetica Neue", sans-serif; background: var(--bg); color: var(--ink); }

/* Top progress bar */
.scroll-progress{ position: fixed; top: 0; left: 0; height: 3px; background: linear-gradient(90deg,var(--accent),var(--brand)); z-index: 1100; box-shadow: var(--shadow-1); transition: width .15s ease-out; }

/* Reveal on scroll - applies to below-the-fold content only */
.reveal{ opacity:0; transform: translateY(8px); transition: opacity .5s ease, transform .5s ease; }
.reveal.in{ opacity:1; transform: none; }

/* Header and hero are always visible for optimal initial paint */
.site-header.reveal,
.hero.reveal {
  opacity: 1;
  transform: none;
}

/* Header */
.site-header .topbar{ 
  position: sticky; 
  top: 0; 
  z-index: 100; 
  backdrop-filter: saturate(180%) blur(6px);
  display: flex;
  align-items: center;
  padding: 0 1rem;
  min-height: 64px;
  background: var(--brand);
  color: #fff;
}
.brand{ cursor:pointer; font-weight:600; letter-spacing:.2px; color: #fff; }
.spacer { flex: 1 1 auto; }
.main-nav { display: flex; align-items: center; gap: 0.5rem; }

/* Navigation buttons - plain HTML replacement for mat-button */
.nav-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.5rem 1rem;
  background: transparent;
  border: none;
  color: #fff;
  font-size: 0.875rem;
  font-weight: 500;
  text-decoration: none;
  border-radius: var(--radius-6);
  cursor: pointer;
  transition: background 0.15s;
  min-height: 36px;
}
.nav-btn:hover, .nav-btn:focus-visible {
  background: rgba(255, 255, 255, 0.1);
}
.nav-btn:focus-visible {
  outline: 2px solid #fff;
  outline-offset: 2px;
}

/* Navigation hover + focus - updated for plain buttons */
.main-nav .nav-btn { position:relative; overflow:hidden; }
.main-nav .nav-btn::after { content:""; position:absolute; left:10%; right:10%; bottom:.35rem; height:2px; background: currentColor; transform:scaleX(0); transform-origin:left; transition: transform .25s ease; opacity:.8; }
.main-nav .nav-btn:hover::after, .main-nav .nav-btn:focus-visible::after { transform:scaleX(1); }

/* Hero */
.hero{ position:relative; padding: clamp(3rem, 8vw, 6rem) 0; background: linear-gradient(180deg, #e3f2fd 0%, transparent 60%); overflow:hidden; }
.hero-bg{ position:absolute; inset:0; pointer-events:none; background:
  radial-gradient(700px 200px at 10% -10%, rgba(25,118,210,.15), transparent),
  radial-gradient(600px 200px at 90% -20%, rgba(0,188,212,.18), transparent);
}
.hero-inner{ position:relative; display:grid; gap: var(--space-5); }
.uvp{ font-size: clamp(1.75rem, 3vw, 2.25rem); margin:0; line-height:1.25; }
.tag{ margin:0; color: var(--muted); max-width: 60ch; }
.cta{ display:flex; gap: var(--space-4); margin-top: var(--space-4); }
.cta-btn{ padding: .6rem 1rem; border-radius: var(--radius-8); border: 0; background: var(--brand); color:#fff; box-shadow: var(--shadow-2); cursor:pointer; }
.cta-btn:hover, .cta-btn:focus-visible{ background: var(--brand-600); }
.ghost-btn{ padding: .55rem 1rem; border-radius: var(--radius-8); border:1px solid var(--brand); color: var(--brand); background: transparent; cursor:pointer; }
.ghost-btn:hover, .ghost-btn:focus-visible{ background: rgba(25,118,210,.06); }

/* Container */
.container { max-width: 1100px; margin: 0 auto; padding: var(--space-5); }

/* Main content area with reserved vertical space */
main#main-content.container,
main.container[role="main"] {
  min-height: calc(100vh - 300px);
  contain: layout style;
}

/* ===== Layout Stability ===== */

/* Reserve vertical space for skills section during loading */
.skills {
  min-height: 120px;
}

.skills-grid {
  min-height: 80px;
}

/* Reserve vertical space for project cards during loading */
.card-list {
  min-height: 200px;
}

/* Empty state with consistent dimensions */
.empty-state {
  min-height: 150px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

/* Forms - Enhanced for accessibility */
input, button { font-size: 14px; }
input { padding: .5rem .6rem; border: 1px solid #cfd8dc; border-radius: var(--radius-6); background: var(--surface); color: var(--ink); }
input::placeholder { color: var(--muted); opacity: 1; }
button { padding: .5rem .9rem; border: 1px solid #cfd8dc; background: var(--surface); border-radius: var(--radius-6); cursor: pointer; min-height: 44px; min-width: 44px; }

/* Ensure minimum touch target size (WCAG 2.5.5) */
a, button, input[type="checkbox"], input[type="radio"] {
  min-height: 44px;
  min-width: 44px;
}

input[type="text"], input[type="email"], input[type="password"], textarea {
  min-height: 44px;
}

/* Footer */
footer.site-footer { 
  margin-top: 2rem; 
  padding: 1rem 0; 
  border-top: 1px solid #e0e0e0; 
  color: var(--muted); 
  background: #fff;
  min-height: 60px;
  height: 60px;
  contain: layout style;
  box-sizing: border-box;
}
footer .footer-inner { 
  display: flex; 
  justify-content: space-between; 
  align-items: center; 
  gap: 1rem;
  height: 100%;
}

/* Skills/Progress */
.skills{ margin: var(--space-8) 0; }
.skills-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(220px,1fr)); gap: var(--space-5); }
.skill{ background: var(--surface); border:1px solid #e6eef5; border-radius: var(--radius-8); padding: var(--space-5); box-shadow: var(--shadow-1); }
.skill-top{ display:flex; align-items:center; justify-content:space-between; margin-bottom: var(--space-3); }
.skill-bar{ position:relative; height: 8px; background:#e3f2fd; border-radius: 999px; overflow:hidden; }
.skill-fill{ position:absolute; inset:0 auto 0 0; width: 0; background: linear-gradient(90deg, var(--brand), var(--accent)); border-radius: 999px; }
.skill-fill.animate{ animation: fillWidth 1.2s ease forwards; }
@keyframes fillWidth{ to { width: var(--target, 0%); } }

/* Comments list polish (subtle interaction) */
.comment-list{ list-style:none; padding:0; display:flex; flex-direction:column; gap:.25rem }
.comment-item{ background:#fafafa; border:1px solid #eee; border-radius:6px; padding:.5rem; display:flex; justify-content:space-between; align-items:center; transition: transform .12s ease, box-shadow .12s ease; }
.comment-item:hover{ transform: translateY(-1px); box-shadow: var(--shadow-1); }
.link{ background:none; border:none; color: var(--brand); cursor:pointer }

/* Helpers */
.ml-sm{ margin-left: .75rem; }
.small{ font-size: .875rem; color: var(--ink);}

/* Screen reader only - enhanced for WCAG compliance */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Visible on focus (for skip links and hidden focusable elements) */
.sr-only-focusable:focus,
.sr-only-focusable:active {
  position: static;
  width: auto;
  height: auto;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* Ensure contrast for primary toolbar items */
.mat-toolbar.mat-primary{ color:#fff; }
.mat-toolbar a[mat-button], .mat-toolbar button[mat-button]{ color:#fff; }

/* Snackbar error styling */
.snack-error .mdc-snackbar__surface{ background:#e53935 !important; color:#fff !important; }

/* Snackbar action buttons with proper pointer events */
.mat-mdc-snack-bar-action,
.mdc-snackbar__actions,
.mat-mdc-button.mat-mdc-snack-bar-action {
  pointer-events: auto !important;
  cursor: pointer !important;
  z-index: 10 !important;
}

.mdc-snackbar__surface {
  pointer-events: auto !important;
}

.mat-mdc-snack-bar-container,
.mdc-snackbar {
  pointer-events: auto !important;
  z-index: 1000 !important;
}

/* ===== Keyboard Navigation Visual Feedback ===== */

/* Visible focus for list items with keyboard navigation */
[role="listitem"]:focus-visible,
.card:focus-visible,
.task:focus-visible,
.work-item:focus-visible,
.comment-item:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring);
  outline-offset: var(--focus-ring-offset);
  box-shadow: 0 0 0 1px var(--surface), 0 0 0 4px var(--focus-ring);
}

/* Keyboard-navigable cards and list items */
.card[tabindex],
.task[tabindex],
.work-item[tabindex],
.comment-item[tabindex] {
  cursor: pointer;
}

.card[tabindex]:focus,
.task[tabindex]:focus,
.work-item[tabindex]:focus {
  outline: var(--focus-ring-width) solid var(--focus-ring);
  outline-offset: var(--focus-ring-offset);
}

/* Error state for form inputs (WCAG 1.4.1 - not color alone) */
input.error,
input[aria-invalid="true"] {
  border-color: var(--danger);
  border-width: 2px;
  box-shadow: 0 0 0 1px var(--danger);
}

input.error:focus-visible,
input[aria-invalid="true"]:focus-visible {
  outline-color: var(--danger);
}

/* Success state */
input.success,
input[aria-invalid="false"] {
  border-color: var(--good);
}

/* ===== Auth Pages (Login/Register) ===== */

/* Auth pages container positioned below header */
.auth-main {
  display: flex;
  justify-content: center;
  padding: var(--space-6) var(--space-5);
  min-height: calc(90vh - 64px - 60px);
}

/* Auth card container */
.auth-container {
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding: 0;
  width: 100%;
}

/* Auth container visibility scoped to auth routes */
.container .auth-container {
  display: none;
}

.auth-card {
  width: 100%;
  max-width: 400px;
  background: var(--surface);
  border-radius: var(--radius-8);
  box-shadow: var(--shadow-2);
  border: 1px solid #e2e8f0;
}

.auth-header {
  padding: var(--space-6) var(--space-6) var(--space-4);
  text-align: center;
}

.auth-header h1 {
  margin: 0 0 var(--space-2);
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--ink);
}

.auth-header p {
  margin: 0;
  color: var(--muted);
  font-size: 0.875rem;
}

.auth-body {
  padding: 0 var(--space-6) var(--space-6);
}

.auth-body .mat-mdc-form-field {
  width: 100%;
  margin-bottom: var(--space-3);
}

.auth-body .mat-mdc-form-field .mdc-text-field--filled {
  background-color: #f8fafc;
  border-radius: var(--radius-6) var(--radius-6) 0 0;
}

.auth-body .mat-mdc-form-field:hover .mdc-text-field--filled {
  background-color: #f1f5f9;
}

.auth-submit-btn {
  width: 100%;
  padding: 0.75rem 1.5rem !important;
  font-size: 0.9375rem !important;
  font-weight: 500 !important;
  border-radius: var(--radius-6) !important;
  margin-top: var(--space-4);
  min-height: 44px;
  text-transform: none !important;
  display: flex !important;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.auth-submit-btn mat-spinner {
  display: inline-block;
}

.auth-footer {
  padding: var(--space-4) var(--space-6);
  text-align: center;
  border-top: 1px solid #e2e8f0;
  background: #fafbfc;
  border-radius: 0 0 var(--radius-8) var(--radius-8);
  font-size: 0.875rem;
  color: var(--muted);
}

.auth-footer a {
  color: var(--brand);
  text-decoration: none;
  font-weight: 500;
  transition: color 0.15s ease;
}

.auth-footer a:hover,
.auth-footer a:focus-visible {
  color: var(--brand-600);
  text-decoration: underline;
}

.auth-error {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-3) var(--space-4);
  background: #fef2f2;
  border: 1px solid #fecaca;
  border-radius: var(--radius-6);
  color: var(--danger);
  font-size: 0.875rem;
  margin-bottom: var(--space-4);
}

.auth-error mat-icon {
  font-size: 1.25rem;
  width: 1.25rem;
  height: 1.25rem;
  flex-shrink: 0;
}

.demo-hint {
  background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
  border: 1px solid #bae6fd;
  border-radius: var(--radius-6);
  padding: var(--space-4);
  margin-bottom: var(--space-5);
  font-size: 0.8125rem;
  color: #0369a1;
  line-height: 1.5;
}

.demo-hint strong {
  display: block;
  margin-bottom: var(--space-2);
  color: #0c4a6e;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.demo-hint code {
  background: rgba(255, 255, 255, 0.7);
  padding: 0.125rem 0.375rem;
  border-radius: var(--radius-4);
  font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
  font-size: 0.8125rem;
  color: #0284c7;
}

/* Fix Material Icons prefix alignment in form fields (MDC-based Angular Material 15+) */
.auth-body .mat-mdc-form-field-icon-prefix {
  padding: 0 8px 0 0 !important;
  align-self: center;
}

.auth-body .mat-mdc-form-field-icon-prefix > mat-icon,
.auth-body mat-icon[matPrefix] {
  padding: 0 !important;
  margin-right: 8px;
  color: var(--muted);
  vertical-align: middle;
}

/* Ensure proper infix padding when prefix icon is present */
.auth-body .mdc-text-field--filled .mdc-text-field__input {
  padding-left: 0 !important;
}

/* Fix the floating label position with prefix */
.auth-body .mat-mdc-text-field-wrapper .mat-mdc-form-field-infix {
  padding-top: 24px;
  padding-bottom: 8px;
}

/* Password toggle button alignment */
.auth-body .password-toggle {
  margin-right: -8px;
}

/* ===== Snackbar Position Fix - Top Right Below Nav ===== */
.mat-mdc-snack-bar-container {
  margin-top: 80px !important;
}

.cdk-overlay-pane.mat-mdc-snack-bar-handset,
.cdk-overlay-pane:has(.mat-mdc-snack-bar-container) {
  top: 0 !important;
  bottom: auto !important;
  right: 16px !important;
  left: auto !important;
  position: fixed !important;
}

/* Auth page responsive */
@media (max-width: 480px) {
  .auth-container {
    padding: var(--space-4);
  }

  .auth-card {
    border-radius: var(--radius-6);
  }

  .auth-header {
    padding: var(--space-5) var(--space-5) var(--space-3);
  }

  .auth-body {
    padding: 0 var(--space-5) var(--space-5);
  }
}

/* ===== End Auth Pages ===== */

/* ===== Page Headers ===== */

.page-header {
  margin-bottom: var(--space-6);
  padding-bottom: var(--space-4);
  border-bottom: 1px solid #e2e8f0;
}

.page-header h2,
h2#work-items-heading {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--ink);
  margin: 0 0 var(--space-2) 0;
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.page-header p {
  margin: 0;
  color: var(--muted);
  font-size: 0.9375rem;
}

/* ===== Form Enhancements ===== */

.form-inline input {
  border: 1px solid #d1d5db;
  border-radius: var(--radius-6);
  padding: 0.625rem 0.875rem;
  font-size: 0.9375rem;
  background: var(--surface);
  color: var(--ink);
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
  min-height: 44px;
}

.form-inline input:hover {
  border-color: #9ca3af;
}

.form-inline input:focus {
  border-color: var(--brand);
  box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.15);
  outline: none;
}

.form-inline input::placeholder {
  color: #9ca3af;
}

.form-inline button {
  background: var(--brand);
  color: #fff;
  border: none;
  border-radius: var(--radius-6);
  padding: 0.625rem 1rem;
  font-size: 0.9375rem;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.15s ease, transform 0.1s ease;
  min-height: 44px;
  white-space: nowrap;
}

.form-inline button:hover:not(:disabled) {
  background: var(--brand-600);
}

.form-inline button:active:not(:disabled) {
  transform: translateY(1px);
}

.form-inline button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* ===== Section Headers ===== */

.section h3,
section h3 {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--ink);
  margin: 0 0 var(--space-4) 0;
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.section h3::before {
  content: '';
  display: inline-block;
  width: 4px;
  height: 1.125rem;
  background: var(--brand);
  border-radius: 2px;
}

/* ===== Empty States ===== */

.small {
  font-size: 0.875rem;
  color: var(--muted);
  padding: var(--space-4);
  background: #f8fafc;
  border-radius: var(--radius-6);
  border: 1px dashed #e2e8f0;
  text-align: center;
}

/* ===== Work Item Card Enhancements ===== */

.work-item {
  transition: box-shadow 0.15s ease, transform 0.1s ease;
}

.work-item:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.work-item-actions button {
  background: transparent;
  border: 1px solid #e2e8f0;
  color: var(--ink);
  border-radius: var(--radius-6);
  padding: 0.375rem 0.75rem;
  font-size: 0.8125rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  min-height: 36px;
}

.work-item-actions button:hover {
  background: #f1f5f9;
  border-color: #cbd5e1;
}

.work-item-actions button:last-child {
  color: var(--danger);
  border-color: #fecaca;
}

.work-item-actions button:last-child:hover {
  background: #fef2f2;
  border-color: #f87171;
}

/* ===== Responsive Polish ===== */

@media (max-width: 640px) {
  .form-inline {
    flex-direction: column;
  }
  
  .form-inline input,
  .form-inline button {
    width: 100%;
  }
  
  .work-item-head {
    flex-direction: column;
    gap: var(--space-3);
  }
  
  .work-item-actions {
    width: 100%;
    justify-content: flex-end;
  }
}
