<div class="notification-wrapper">
  <button class="notification-btn" 
          (click)="toggleDropdown()"
          [attr.aria-expanded]="isOpen"
          aria-haspopup="true"
          aria-label="Notifications">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
      <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
    </svg>
    <span *ngIf="unreadCount > 0" class="badge">{{unreadCount > 99 ? '99+' : unreadCount}}</span>
  </button>
  
  <div *ngIf="isOpen" class="notification-dropdown" role="menu">
    <div class="dropdown-header">
      <span>Notifications</span>
      <button *ngIf="notifications.length > 0" 
              class="mark-all-btn"
              (click)="markAllAsRead()"
              aria-label="Mark all as read">
        Mark all read
      </button>
    </div>
    
    <div class="notification-list" role="list">
      <div *ngFor="let n of notifications" 
           class="notification-item"
           [class.unread]="!n.isRead"
           role="listitem"
           (click)="onNotificationClick(n)">
        <div class="notification-content">
          <strong>{{n.mentionedByName}}</strong> mentioned you in 
          <span class="work-item-title">{{n.workItemTitle}}</span>
        </div>
        <div class="notification-body">{{n.commentBody}}</div>
        <div class="notification-time">{{formatTime(n.createdAt)}}</div>
      </div>
      
      <div *ngIf="notifications.length === 0" class="empty-state">
        No notifications yet
      </div>
    </div>
  </div>
</div>
